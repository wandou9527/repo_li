<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
</head>
<!-- ç®€å•æŸ±çŠ¶å›¾ ğŸ“Š åŠ¨æ€æ•°æ® -->
<body style="height: 90%; width: 90%; margin: 20px">
<div id="container" style="height: 100%"></div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
<!--<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xfhhaTThl11qYVrqLZii6w8qE5ggnhrY&__ec_v__=20190126"></script>-->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<script src="../../config/config.js"></script>
<script type="text/javascript">
    var dom = document.getElementById("container");
    var myChart = echarts.init(dom);
    var app = {};
    option = null;
    option = {
        title: {
            text: 'å°ç›®æ ‡-2 ç¾å¥³è‰³æ°å­¦ä¹ è®¡åˆ’',
            subtext: 'yè½´å½“æ—¥å­¦ä¹ æ—¶é—´(h)'
        },
        color: ['#3398DB'],
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // åæ ‡è½´æŒ‡ç¤ºå™¨ï¼Œåæ ‡è½´è§¦å‘æœ‰æ•ˆ
                type: 'shadow'        // é»˜è®¤ä¸ºç›´çº¿ï¼Œå¯é€‰ä¸ºï¼š'line' | 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: [
            {
                type: 'category',
                //ç¬¬12å‘¨ 3.16å‘¨ä¸€ - 3.22å‘¨æ—¥
                data: ['2020-03-16'],
                axisTick: {
                    alignWithLabel: true
                }
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: [
            {
                name: 'å­¦ä¹ æ—¶é•¿(h)',
                type: 'bar',
                barWidth: '40%',
                data: [6]
            }
        ]
    };
    ;
    if (option && typeof option === "object") {
        myChart.setOption(option, true);
    }

    listMatterLog();

    function listMatterLog() {
        let xData = []
        let reachAmounts = []
        $.ajax({
            url: listMatterLogUrl,
            // url: 'http://localhost:63342/matter_log/list',
            async: true,
            type: 'get',
            dataType: 'json',
            success: function (resp) {
                sleep(2000)
                // vm.$set('peoples', data.result);
                console.log('ajax matter_log/list ', resp)
                // ajaxData = resp
                let data = resp.data;

                for (let i = 0; i < data.length; i++) {
                    //[data[i].happenDate, data[i].reachAmount]
                    xData.push(data[i].happenDate)
                    reachAmounts.push(data[i].reachAmount)
                }
                console.log('xData', xData, 'reachAmounts', reachAmounts)
                // myChart.hideLoading();    //éšè—åŠ è½½åŠ¨ç”»
                myChart.setOption({
                    //åŠ è½½æ•°æ®å›¾è¡¨
                    xAxis: [
                        {
                            type: 'category',
                            //ç¬¬12å‘¨ 3.16å‘¨ä¸€ - 3.22å‘¨æ—¥
                            data: xData,
                            axisTick: {
                                alignWithLabel: true
                            }
                        }
                    ],
                    series: [
                        {
                            name: 'å­¦ä¹ æ—¶é•¿(h)',
                            type: 'bar',
                            barWidth: '40%',
                            data: reachAmounts
                        }
                    ]
                });
                console.log('jie shu')
            },
            error: function (xhr, errorType, error) {
                alert('Ajax request error, errorType: ' + errorType + ', error: ' + error);
            }
        });
    }

    //å‚æ•°nä¸ºä¼‘çœ æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’:
    function sleep(n) {
        var start = new Date().getTime();
        //  console.log('ä¼‘çœ å‰ï¼š' + start);
        while (true) {
            if (new Date().getTime() - start > n) {
                break;
            }
        }
    }

</script>
</body>
</html>
