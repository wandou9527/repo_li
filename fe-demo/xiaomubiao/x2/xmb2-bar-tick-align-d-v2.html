<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <title>åŠ æ²¹ğŸ†™ æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
    <!--<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xfhhaTThl11qYVrqLZii6w8qE5ggnhrY&__ec_v__=20190126"></script>-->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
    <script src="../../config/config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<!-- ç®€å•æŸ±çŠ¶å›¾ ğŸ“Š åŠ¨æ€æ•°æ®
2020-04-05 å¤åˆ¶æ­¤å‰¯æœ¬
å‡†å¤‡åœ¨åŸæ¥åŸºç¡€ä¸ŠåŠ æ€»æ•°ã€å¹³å‡æ•°ç»Ÿè®¡
åŠ vueçš„åº”ç”¨
 -->
<body style="height: 100%; width: 100%; margin: 20px">
<div id="container" style="height: 90%">
</div>
<div id="app6">
    å­¦ä¹ æ€»æ—¶é•¿ï¼š{{sumTimeV}} hï¼ˆæ•°æ®ä»2020-03-16ç»Ÿè®¡ï¼‰
</div>

<script type="text/javascript">
    var dom = document.getElementById("container");
    var myChart = echarts.init(dom);
    var app = {};
    option = null;
    let sumTime = 0;
    option = {
        title: {
            text: 'å°ç›®æ ‡-2 ç¾å¥³è‰³æ°å­¦ä¹ è®¡åˆ’',
            subtext: 'yè½´å½“æ—¥å­¦ä¹ æ—¶é—´(h)'
        },
        color: ['#3398DB'],
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // åæ ‡è½´æŒ‡ç¤ºå™¨ï¼Œåæ ‡è½´è§¦å‘æœ‰æ•ˆ
                type: 'shadow'        // é»˜è®¤ä¸ºç›´çº¿ï¼Œå¯é€‰ä¸ºï¼š'line' | 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: [
            {
                type: 'category',
                //ç¬¬12å‘¨ 3.16å‘¨ä¸€ - 3.22å‘¨æ—¥
                data: [],
                axisTick: {
                    alignWithLabel: true
                }
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: [
            {
                name: 'å­¦ä¹ æ—¶é•¿(h)',
                type: 'bar',
                barWidth: '40%',
                data: []
            }
        ]
    };
    ;
    if (option && typeof option === "object") {
        myChart.setOption(option, true);
    }


    /**
     * vue
     *
     * @type {Vue}
     */
    var app = new Vue({
        el: '#app6',
        data: {
            message: 'Hello Vue! lalalala 888',
            url: listMatterLogUrl,
            strList: list,
            users: confUsers,
            sumTimeV: 1
        },
        created: function () {
            // `this` æŒ‡å‘ vm å®ä¾‹
            // console.log('a is: ' + '666')
            // f() å¥½ä½¿
            this.listMatterLogV();
        },
        methods: {
            listMatterLogV() {
                this.sumTimeV = 2.8
                let xData = []
                let reachAmounts = []
                $.ajax({
                    url: listMatterLogUrl,
                    // url: 'http://localhost:63342/matter_log/list',
                    async: true,
                    type: 'get',
                    dataType: 'json',
                    success: function (resp) {
                        this.sumTimeV = 3.8
                        // sleep(2000)
                        // vm.$set('peoples', data.result);
                        console.log('ajax matter_log/list ', resp)
                        // ajaxData = resp
                        let data = resp.data;

                        for (let i = 0; i < data.length; i++) {
                            //[data[i].happenDate, data[i].reachAmount]
                            xData.push(data[i].happenDate)
                            reachAmounts.push(data[i].reachAmount)
                            sumTime = sumTime + data[i].reachAmount
                            this.sumTimeV = this.sumTimeV + data[i].reachAmount
                            console.log("this.sumTimeV", this.sumTimeV)
                        }
                        console.log('xData', xData, 'reachAmounts', reachAmounts)
                        // myChart.hideLoading();    //éšè—åŠ è½½åŠ¨ç”»
                        myChart.setOption({
                            //åŠ è½½æ•°æ®å›¾è¡¨
                            xAxis: [
                                {
                                    type: 'category',
                                    //ç¬¬12å‘¨ 3.16å‘¨ä¸€ - 3.22å‘¨æ—¥
                                    data: xData,
                                    axisTick: {
                                        alignWithLabel: true
                                    }
                                }
                            ],
                            series: [
                                {
                                    name: 'å­¦ä¹ æ—¶é•¿(h)',
                                    type: 'bar',
                                    barWidth: '40%',
                                    data: reachAmounts
                                }
                            ]
                        });
                        console.log('jie shu')
                    },
                    error: function (xhr, errorType, error) {
                        this.sumTimeV = 66
                        alert('Ajax request error, errorType: ' + errorType + ', error: ' + error);
                        this.sumTimeV = 66
                    }
                });
            }
        }
    })

</script>
</body>
</html>
